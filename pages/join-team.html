<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Account - IGNITE Part Share</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../styles/main.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="../index.html">IGNITE Part Share</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html">Home</a>
                    </li>
                </ul>
                <div class="navbar-nav">
                    <a class="nav-link" href="login.html">Login</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="main-content">
        <main class="container mt-5">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="card shadow-lg">
                        <div class="card-body p-5" id="registrationForm">
                            <h2 class="text-center mb-4">Join Team as Member or Mentor</h2>
                            <p class="text-center text-muted mb-5">Join an existing FIRST team to start sharing parts</p>

                            <!-- Progress Bar -->
                            <div class="progress-container mb-5">
                                <div class="progress-steps">
                                    <div class="step-indicator active" data-step="1">
                                        <div class="step-number">1</div>
                                        <div class="step-label">Verify Team</div>
                                        <div class="step-description">Enter team information</div>
                                    </div>
                                    <div class="step-indicator" data-step="2">
                                        <div class="step-number">2</div>
                                        <div class="step-label">Your Information</div>
                                        <div class="step-description">Personal details</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Step 1: Team Verification -->
                            <div id="step1" class="registration-step">
                                <div class="step-header mb-4">
                                    <h3><i class="fas fa-search me-2"></i>Step 1: Verify Team</h3>
                                    <p class="text-muted">Enter the team information you want to join</p>
                                </div>

                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="teamNumber" class="form-label">Team Number *</label>
                                        <input type="text" class="form-control" id="teamNumber" placeholder="e.g., 12345" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="teamName" class="form-label">Team Name *</label>
                                        <input type="text" class="form-control" id="teamName" placeholder="Enter team name" required>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="teamPassword" class="form-label">Team Password *</label>
                                        <input type="password" class="form-control" id="teamPassword" placeholder="Enter team password" required>
                                        <div class="form-text">Ask your coach for the team password</div>
                                    </div>
                                </div>

                                <div class="text-center mt-4">
                                    <button type="button" class="btn btn-primary btn-lg px-5" id="verifyTeamBtn">
                                        <i class="fas fa-check me-2"></i>Verify Team Information
                                    </button>
                                </div>

                                <!-- Verification Messages -->
                                <div id="verificationSuccess" class="alert alert-success mt-3" style="display: none;">
                                    <i class="fas fa-check-circle me-2"></i>
                                    <strong>Team found!</strong> This team exists and you can join it.
                                </div>
                                <div id="verificationError" class="alert alert-danger mt-3" style="display: none;">
                                    <i class="fas fa-exclamation-circle me-2"></i>
                                    <span id="errorMessage"></span>
                                </div>

                                <div class="text-center mt-4">
                                    <button type="button" class="btn btn-success btn-lg px-5" id="nextToStep2" disabled>
                                        Continue to Personal Information <i class="fas fa-arrow-right ms-2"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Step 2: Personal Information -->
                            <div id="step2" class="registration-step" style="display: none;">
                                <div class="step-header mb-4">
                                    <h3><i class="fas fa-user me-2"></i>Step 2: Your Information</h3>
                                    <p class="text-muted">Tell us about yourself to join the team</p>
                                </div>

                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="firstName" class="form-label">Your First Name *</label>
                                        <input type="text" class="form-control" id="firstName" placeholder="Enter your first name" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="lastName" class="form-label">Your Last Name *</label>
                                        <input type="text" class="form-control" id="lastName" placeholder="Enter your last name" required>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="email" class="form-label">Your Email Address *</label>
                                        <input type="email" class="form-control" id="email" placeholder="your.email@example.com" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="phone" class="form-label">Your Phone Number</label>
                                        <input type="tel" class="form-control" id="phone" placeholder="(555) 123-4567">
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="role" class="form-label">Your Role *</label>
                                        <select class="form-select" id="role" required>
                                            <option value="">Select your role</option>
                                            <option value="Member">Member</option>
                                            <option value="Mentor">Mentor</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="relationship" class="form-label">Relationship to Team</label>
                                        <textarea class="form-control" id="relationship" rows="2" placeholder="e.g., Student, Parent, Industry professional"></textarea>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="password" class="form-label">Password *</label>
                                        <input type="password" class="form-control" id="password" placeholder="Create a password" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="confirmPassword" class="form-label">Confirm Password *</label>
                                        <input type="password" class="form-control" id="confirmPassword" placeholder="Confirm your password" required>
                                    </div>
                                </div>

                                <div class="alert alert-info">
                                    <h6><i class="fas fa-info-circle me-2"></i>What happens next?</h6>
                                    <p class="mb-0">After you submit with the correct team password, your account will be created and you'll be immediately added to the team. No email verification needed!</p>
                                </div>

                                <div class="form-check mb-4">
                                    <input class="form-check-input" type="checkbox" id="agreeTOS" required>
                                    <label class="form-check-label" for="agreeTOS">
                                        I agree to the <a href="terms.html" target="_blank">Terms of Service</a> and confirm that all information provided is accurate.
                                    </label>
                                </div>

                                <div class="d-flex justify-content-between mt-4">
                                    <button type="button" class="btn btn-secondary btn-lg" onclick="showStep(1)">
                                        <i class="fas fa-arrow-left me-2"></i>Back
                                    </button>
                                    <button type="button" class="btn btn-primary btn-lg px-5" id="submitRegistrationBtn">
                                        <i class="fas fa-user-plus me-2"></i>Join Team
                                    </button>
                                </div>
                            </div>

                            <!-- Success Message -->
                            <div id="registrationSuccess" class="text-center" style="display: none;">
                                <div class="success-icon mb-4">
                                    <i class="fas fa-check-circle text-success" style="font-size: 4rem;"></i>
                                </div>
                                <h3 class="text-success mb-3">Welcome to the Team!</h3>
                                <p class="text-muted mb-4">Your account has been created and you're now a member of the team!</p>
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                            </div>

                            <div class="text-center mt-4">
                                <p>Already have an account? <a href="login.html">Login here</a></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <footer class="bg-light mt-5 py-3">
        <div class="container text-center">
            <p>&copy; 2025 IGNITE Part Share. All rights reserved.</p>
        </div>
    </footer>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    
    <!-- Initialize Firebase -->
    <script src="../js/firebase-init.js"></script>

    <!-- Bootstrap and custom scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/auth.js"></script>

    <script>
        // Update summary when moving to step 3
        function updateSummary() {
            if (teamData && userData) {
                // Team summary
                document.getElementById('teamSummary').innerHTML = `
                    <p><strong>Team Number:</strong> ${teamData.teamNumber}</p>
                    <p><strong>Team Name:</strong> ${teamData.teamName}</p>
                `;

                // User summary
                document.getElementById('userSummary').innerHTML = `
                    <p><strong>Name:</strong> ${userData.firstName} ${userData.lastName}</p>
                    <p><strong>Email:</strong> ${userData.email}</p>
                    <p><strong>Role:</strong> ${userData.role}</p>
                    <p><strong>Phone:</strong> ${userData.phone || 'Not provided'}</p>
                `;
            }
        }

        // Override the showStep function to update summary
        const originalShowStep = window.showStep;
        window.showStep = function(stepNumber) {
            originalShowStep(stepNumber);
            if (stepNumber === 2) {
                updateSummary();
            }
        };
    </script>

    <!-- Notification Container -->
    <div class="notification-container" id="notificationContainer"></div>
</body>
</html> 